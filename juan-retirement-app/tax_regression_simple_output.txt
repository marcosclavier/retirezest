================================================================================
TAX REGRESSION TEST SUITE (Simplified)
Testing tax engine after US-044 and US-076 changes
================================================================================

================================================================================
TEST 1: Employment Income Taxation (Age 64, before retirement)
================================================================================
   Federal tax: $15,131.56
   Provincial tax: $6,394.34
✅ PASS: Employment Income (Age 64, $100K)
   Expected: $21,500.00, Actual: $21,525.90, Variance: +0.12%

================================================================================
TEST 2: RRIF Withdrawal Taxation (Age 71)
================================================================================
   Federal tax: $8,904.56
   Provincial tax: $3,720.67
❌ FAIL: RRIF + CPP + OAS (Age 71)
   Expected: $9,000.00, Actual: $12,625.24, Variance: +40.28%
   Acceptable range: $8,100.00 - $9,900.00

================================================================================
TEST 3: Capital Gains Taxation (50% Inclusion Rate)
================================================================================
   Total income: $63,500.00
   Taxable capital gains (50%): $20,000.00
   Federal tax: $4,412.25
   Provincial tax: $1,840.74
✅ PASS: Capital Gains (50% Inclusion)
   Expected: $6,000.00, Actual: $6,252.99, Variance: +4.22%

================================================================================
TEST 4: Corporate Eligible Dividend Taxation
================================================================================
   Eligible dividends: $50,000.00
   Grossup (38%): $19,000.00
   Federal tax: $6,473.35
   Provincial tax: $1,410.20
❌ FAIL: Eligible Dividends
   Expected: $5,000.00, Actual: $7,883.55, Variance: +57.67%
   Acceptable range: $4,250.00 - $5,750.00

================================================================================
TEST 5: Pension Income Splitting (Couples)
================================================================================
   Total tax before splitting: $13,496.71
   Total tax after splitting: $10,990.07
   Tax savings from splitting: $2,506.64
✅ PASS: Pension splitting reduces total tax

================================================================================
TEST 6: OAS Clawback at High Income
================================================================================
   Total income: $139,500.00
   Federal tax: $35,166.25
   Provincial tax: $11,591.97
   Total tax: $46,758.22
❌ FAIL: High Income with OAS Clawback
   Expected: $30,000.00, Actual: $46,758.22, Variance: +55.86%
   Acceptable range: $27,000.00 - $33,000.00

================================================================================
TEST 7: Multiple Income Types Aggregation
================================================================================
   Total income: $89,500.00
   CPP: $15,000.00, OAS: $8,500.00
   Pension: $20,000.00, Rental: $24,000.00
   RRIF: $22,000.00
   Federal tax: $15,415.01
   Provincial tax: $7,499.70
❌ FAIL: Multiple Income Types
   Expected: $17,000.00, Actual: $22,914.72, Variance: +34.79%
   Acceptable range: $15,300.00 - $18,700.00

================================================================================
TAX REGRESSION TEST SUMMARY
================================================================================
Tests Passed: 3
Tests Failed: 4
Total Tests: 7

❌ 4 TESTS FAILED - REVIEW REQUIRED

Detailed results saved to: tax_regression_results_simple.json
